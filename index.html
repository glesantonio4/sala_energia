<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MUCH Â· Quiz Interactivo</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <canvas id="confetti" class="confetti-canvas"></canvas>

  <!-- BotÃ³n â€œfantasmaâ€ por si app.js lo busca (evita errores) -->
  <button id="startBtn" class="visually-hidden" hidden></button>

  <!-- ğŸ” REDIRECCIÃ“N: si entras directo a index, te llevo a portada -->
  <script>
    (function () {
      var from = new URLSearchParams(location.search).get('from');
      // Permite entrar si vienes desde la portada; si no, manda a portada.html
      if (from !== 'portada') {
        location.replace('portada.html');
      }
    })();
  </script>

  <!-- ====== QUIZ ====== -->
  <main id="quizShell">
    <div class="quiz-card">
      <div class="d-flex align-items-center gap-3 flex-wrap mb-2">
        <div id="logoEmoji" class="logo">
          <img src="Logo-Ag-14.png" alt="Agencia Digital Chiapas" class="logo__img small">
        </div>
        <div class="flex-grow-1">
          <h1 class="h4 mb-1">MUCH Â· Quiz Interactivo</h1>
          <p class="tiny mb-0">Responde, aprende y Â¡gana tu entrada! ğŸ</p>
        </div>
        <div id="pillSala" class="pill">Sala:Energia</div>
      </div>

      <div class="d-flex align-items-center justify-content-between mt-2 mb-2">
        <div class="w-100 me-3">
          <div class="progress" role="progressbar" aria-label="Progreso" aria-valuemin="0" aria-valuemax="100">
            <div id="bar" class="progress-bar progress__bar" style="width:0%"></div>
          </div>
        </div>
        <div class="form-check form-switch">
          <input class="form-check-input" type="checkbox" id="soundToggle" checked>
          <label class="form-check-label tiny" for="soundToggle">Sonido</label>
        </div>
        <span id="timer" class="tiny ms-2">â° â€”:â€”</span>
      </div>

      <section id="quizView">
        <div class="question-card">
          <div class="d-flex align-items-center gap-2 mb-1">
            <span class="badge text-bg-primary">Pregunta <span id="qIndex">1</span>/<span id="qTotal">â€”</span></span>
          </div>
          <h2 id="qText" class="h5 mb-1">â€¦</h2>
          <p id="qDesc" class="tiny mb-3">â€¦</p>

          <div id="options" class="row gy-2 gx-2" role="group" aria-label="Opciones de respuesta"></div>
          <div id="status" class="fw-bold mt-2" aria-live="polite"></div>

          <div class="d-flex gap-2 mt-3 flex-wrap">
            <button id="nextBtn" type="button" class="btn btn-primary">Siguiente â¡ï¸</button>
          </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mt-3 tiny">
          <div>â­ Puntos: <strong id="points">0</strong></div>
          <div id="hint" class="text-muted">Tip: solo puedes elegir una respuesta</div>
        </div>
      </section>

      <section id="finalView" class="d-none">
        <div class="question-card">
          <h2 id="finalTitle" class="h5">Resultados</h2>
          <p id="finalMsg" class="tiny mb-3"></p>

          <p class="fs-5 fw-bold mb-1">â­ Puntos: <span id="finalPoints">0</span></p>
          <p class="tiny mb-3">Aciertos: <strong id="finalCorrect">0</strong> de <strong id="finalTotal">0</strong></p>

          <div id="giftRow" class="d-flex gap-2 flex-wrap d-none">
            <button id="openTicketBtn" class="btn btn-success">ğŸŸï¸ Ver mi boleto</button>
            <button id="playAgainBtn1" class="btn btn-outline-secondary">ğŸ” Jugar otra vez</button>
          </div>

          <div id="retryRow" class="d-flex gap-2 flex-wrap d-none">
            <button id="playAgainBtn2" class="btn btn-primary">ğŸ” Intentar de nuevo</button>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
